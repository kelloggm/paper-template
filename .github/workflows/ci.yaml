# This CI setup checks that running `make` can successfully build the paper.

name: Build LaTeX document
on: [push, pull_request]
jobs:
  make:
    runs-on: ubuntu-latest
    container:
      image: texlive/texlive
    steps:
      - name: Checkout repository
        uses: actions/checkout@v3
      # As of 2023-10-21, this update is necessary to get around a bug
      # in the acmart.class in the texlive/texlive docker image.
      # retries up to 3 times in case of network failures.
      - name: Update Tex Live distribution 
        run: (echo "=== tlmgr update attempt 1 ===" && tlmgr update --self --all) || \
             (echo "=== tlmgr update attempt 2 ===" && tlmgr update --self --all) || \
             (echo "=== tlmgr update attempt 3 ===" && tlmgr update --self --all)
      - run: make
